<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
						"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.groupware.project.MailDAO">
<!-- <select id="selectMyEmp" resultType="com.groupware.project.MailDTO"> -->
<!-- 	select EmployeeID, Name, DepartmentID, Position, Email from employees where email=#{param1} -->
<!-- </select> -->
<select id="selectEmpEmail" resultType="com.groupware.project.MailDTO">
	select employeeid, name, departmentid, position, email from employees where email=#{param1}
</select>
<insert id="insertEmails" parameterType="java.util.HashMap">
	insert into emails set subject=#{param1},content=#{param2},senderemployeeid=#{param3},
	receiveremployeeid=#{param4},attachment1=#{param5},attachment2=#{param6},attachment3=#{param7}
</insert>
<!-- empid로 email받아서 받은메일함 작성 -->
<select id="selectRecMail" resultType="com.groupware.project.MailDTO"> 
	select a.emailid, c.name, c.email, a.subject, a.content, a.senderemployeeid, a.receiveremployeeid,
		 a.sendtime from emails a inner join employees b on a.receiveremployeeid=b.employeeid 
				  		inner join employees c ON a.SenderEmployeeID=c.EmployeeId where receiveremployeeid=#{param1}
</select>
<!-- 이메일디테일 이메일정보와 받은사람 이름 이메일 -->
<select id="selectDetailMail" resultType="com.groupware.project.MailDTO"> 
	select a.emailid, b.name, b.email, a.subject, a.content, a.senderemployeeid, a.receiveremployeeid,
			a.attachment1, a.attachment2, a.attachment3, a.sendtime from emails a 
			inner join employees b on a.receiveremployeeid=b.employeeid where a.emailid=#{param1}
</select>
<!-- 이메일디테일 보낸사람 이름 이메일 -->
<select id="selectSenderName" resultType="com.groupware.project.MailDTO"> 
	select b.name, b.email from emails a inner join employees b 
					on a.senderemployeeid=b.employeeid where a.emailid=#{param1}
</select>
<!-- 현재 최대 emailid -->
<select id="selectMaxemailid" resultType="Integer">
	select ifnull(max(emailid),0) from emails
</select>
</mapper>